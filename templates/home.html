{% extends 'navbar.html' %}
{% block title %}Inicio{% endblock %}
{% block content %}
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="alert alert-danger">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}

<div class="container-fluid p-0">
    <!-- Banner Section -->
    <div class="jumbotron jumbotron-fluid bg-light rounded-0 banner m-0 rellax" style="position: relative; width: 100%;">
        <div class="banner-overlay"></div>
        <div class="container text-center banner-content">
            <h1 class="display-4 font-weight-bold text-outline" id="banner-title">¡Hola, {{ user.first_name }}!</h1>
            <p class="lead text-outline" id="banner-text">Bienvenido. Aquí podrás gestionar auditorías,
                intervenciones, controles internos y mucho más.</p>
            <hr class="my-4 border-white" id="banner-hr">
            <p class="mb-0 text-outline text-large" id="banner-subtext">Nuestra aplicación está diseñada para ayudarte a mantener tus
                datos actualizados y accesibles en cualquier momento. Explora nuestras características para ver cómo
                podemos facilitarte el trabajo.</p>
        </div>
    </div>
</div>

<div class="container my-5">
    <!-- Features Section -->
    <div class="row text-center">
        <div class="col-md-4 mb-4">
            <div class="card shadow-lg h-100 feature-card" id="feature1">
                <div class="card-body">
                    <i class="fas fa-database fa-3x mb-3 text-dark"></i>
                    <h4 class="card-title font-weight-bold">Gestión de Datos</h4>
                    <p class="card-text">Registra, gestiona y modifica información de auditorías, intervenciones y controles internos.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card shadow-lg h-100 feature-card" id="feature2">
                <div class="card-body">
                    <i class="fas fa-tasks fa-3x mb-3 text-dark"></i>
                    <h4 class="card-title font-weight-bold">Optimización de Tareas</h4>
                    <p class="card-text">Crea minutas mensuales y genera cédulas para intervenciones y auditorías.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card shadow-lg h-100 feature-card" id="feature3">
                <div class="card-body">
                    <i class="fas fa-folder-open fa-3x mb-3 text-dark"></i>
                    <h4 class="card-title font-weight-bold">Acceso a Documentos</h4>
                    <p class="card-text">Accede a archivos generados previamente y almacenados en nuestra base de datos.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Explora Más Section -->
    <div class="row text-center mt-5">
        <div class="col-12">
            <div class="card shadow-lg h-100 feature-card explore-more-card" id="exploreMore">
                <div class="card-body">
                    <h4 class="card-title font-weight-bold">Explora Más</h4>
                    <p class="card-text">Conoce nuestras funcionalidades, obtén soporte y descubre cómo esta aplicación puede facilitar tu trabajo.</p>
                    <a class="btn btn-light btn-sm mt-4" href="https://github.com/bytelu/PSCG-Management-Monitoring-and-Control-Platform/blob/master/docs/user_manual/introduction.md" role="button">
                        <i class="fas fa-info-circle"></i> Más información
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .banner {
        background-image: url('https://images.unsplash.com/photo-1493794179168-82ca7cb00437?q=80&w=1471&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
        background-size: cover;
        background-position: top;
        height: 70vh;
        margin-bottom: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background-attachment: fixed;
    }

    .banner-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.3);
        z-index: 1;
    }

    .banner-content {
        z-index: 2;
    }

    .text-outline {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        color: white;
    }

    body {
        background-color: #f4f6f9;
    }

    .card-title {
        color: #343a40;
        margin-bottom: 1rem;
    }

    .card-text {
        color: #61656a;
        font-size: 1rem;
    }

    .feature-card, .explore-more-card {
        will-change: transform;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        opacity: 0;
        transform: translateY(50px);
    }

    .feature-card:hover, .explore-more-card:hover {
        transform: rotateX(2deg) rotateY(2deg) scale(1.05) translateZ(0);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .explore-more-card {
        margin-top: -40px;
        padding: 2rem;
    }

    .btn-light {
        transition: all 0.4s ease-in-out;
    }

    .btn-light:hover {
        transform: rotateZ(0deg) scale(1.2);
        background-color: #e2e6ea;
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

<script>
    // Animación avanzada del banner
    gsap.fromTo(".banner-content", {
        opacity: 0,
        y: 50,
        filter: "blur(10px)"
    }, {
        opacity: 1,
        y: 0,
        filter: "blur(0px)",
        duration: 1,
        ease: "power4.out",
        delay: 0.2
    });

    // Animación de las tarjetas con ScrollTrigger
    gsap.utils.toArray('.feature-card, .explore-more-card').forEach(card => {
        gsap.to(card, {
            scrollTrigger: {
                trigger: card,
                start: "top 80%",
                end: "bottom 100%",
                scrub: 1,
            },
            opacity: 1,
            y: 0,
            duration: 0.1,
            ease: "power3.out"
        });

        // Animación de hover para escalar la tarjeta a 1.2
        card.addEventListener("mouseenter", () => {
            gsap.to(card, { scale: 1.1, duration: 0.1, ease: "power2.out", overwrite: "auto" });
        });

        card.addEventListener("mouseleave", () => {
            gsap.to(card, { scale: 1, duration: 0.1, ease: "power2.out", overwrite: "auto" });
        });
    });

    // Hover animado con GSAP en los botones
    document.querySelectorAll(".btn-light").forEach(button => {
        button.addEventListener("mouseenter", () => {
            gsap.to(button, { scale: 1.1, rotateZ: 0, duration: 0.01, ease: "elastic.out(1, 0.1)" });
        });
        button.addEventListener("mouseleave", () => {
            gsap.to(button, { scale: 1, rotateZ: 0, duration: 0.01, ease: "elastic.out(1, 0.1)" });
        });
    });

    // Inicializa ScrollTrigger
    ScrollTrigger.refresh();
</script>

{% endblock %}
